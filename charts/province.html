<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>实时游（访）客人数总览</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link href="css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css?v=4.1.0" rel="stylesheet">
    <link href="css/bg2.css" rel="stylesheet">
    <link href="css/basic.css" rel="stylesheet">
</head>

<body>
<div class="main-content">
    <div style="width: 1920px; height: 1080px; position: absolute; overflow: hidden; left: 5px; top: 7px;">
        <div id='stars'></div>
        <div id='stars2'></div>
        <div id='stars3'></div>
    </div>
    <div style="position: absolute; left: 1562px; top: 128px; width: 240px; height: 64px; z-index: 23; margin: 0px !important;">
        <div class="-datav-wraper"
             style="width: 240px; height: 64px; display: flex; align-items: center; justify-content: center; background-color: #1facda; color: #131446; font-size: 22px;font-weight:bold; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">
            全省实时游客排行
        </div>
    </div>
    <div style="position: absolute; left: 1285px; top: 715px; width: 328px; height: 64px; z-index: 23; margin: 0px !important;">
        <div class="-datav-wraper"
             style="width: 328px; height: 64px; display: flex; align-items: center; justify-content: center; background-color: #1facda; color: #131446; font-size: 22px;font-weight:bold; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">
            人数变化趋势
        </div>
    </div>
    <div style="position: absolute; left: 84px; top: 721px; width: 280px; height: 64px; z-index: 23; margin: 0px !important;">
        <div class="-datav-wraper"
             style="width: 280px; height: 64px; display: flex; align-items: center; justify-content: center; background-color: #1facda; color: #131446; font-size: 22px;font-weight:bold; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">
            本省外省人数比例
        </div>
    </div>
    <div class="-datav-wraper"
         style="width: 720px; height: 104px; display: flex;  color: rgb(255, 255, 255); font-size: 40.2271px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; position: absolute; top: 40px; left: 610px; z-index: 1000;cursor: pointer"
         onclick="showMenu()">
        实时游客人数总量
    </div>
    <div class="-datav-com com logo main-img-0-1-5"
         style="position: absolute; left: 1050px; top: 64px; width: 216px; height: 56px; z-index: 22; margin: 0px !important;">
        <div class="-datav-wraper"
             style="width: 216px; height: 56px; font-size: 20px; color: rgb(255, 255, 255); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: flex;">
            2017-06-09 12:19:26
        </div>
    </div>
    <div class="-datav-com com top-02 counter-0-0-11"
         style="position: absolute; left: 610px; top: 114px; width: 248px; height: 80px; z-index: 10; margin: 0px !important;">
        <div class="-datav-wraper" id="countTouristsBox"
             style="width: 248px; height: 80px; display: flex; align-items: center; color: rgb(255, 255, 255); text-align: center; background-color: rgba(1, 1, 1, 0); white-space: nowrap; justify-content: flex-start;">
            <span class="number prefix">正在初始化</span>
        </div>
    </div>
    <style>
        .number.prefix {
            font-size: 56px;
            color: #F8BC38;
            vertical-align: super
        }

        .number.suffix {
            font-size: 42px;
            color: #ebdf26;
            vertical-align: super
        }

        .number.num {
            background-color: rgba(12, 218, 255, 0.8);
            display: inline-block;
            letter-spacing: 0.02em;
            text-indent: 0.02em;
            height: 1em;
            line-height: 1em;
            font-size: 80.91740512052084px;
            letter-spacing: 0.02em;
            margin-right: 0.2em;
        }

        .number.comma {
            color: #ebdf26;
            display: inline-block;
            text-indent: 0.02em;
            height: 1em;
            line-height: 1em;
            font-size: 80.91740512052084px;
            width: 50px;
            margin-right: 0.2em;
        }
    </style>
    <div class="" style="position: absolute;transform:scale(0.75);top:-50px;left:-50px">
        <div id="main5" style="width: 1920px;height: 1080px;"></div>
    </div>
    <div class="" style="position: absolute;transform:scale(0.75);top:-50px;left:-50px">
        <div id="main" style="width: 1920px;height: 1080px;"></div>
    </div>
    <!--折线图-->
    <div style="position: absolute; width: 794px; height: 300px; left: 1079px; top: 747px; border-style: solid; border-width: 32px 37px; border-image-source: url('https://datav.oss-cn-hangzhou.aliyuncs.com/uploads/images/a7c93134c5e1440c58b1a7a3b675009b.png'); border-image-slice: 32 37 fill; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; background: none;">
        <div id="main3" style="width: 100%;height: 260px;"></div>
    </div>

    <div style="position: absolute; width: 377px; height: 510px; left: 1497px; top: 158px; border-style: solid; border-width: 32px 37px; border-image-source: url('https://datav.oss-cn-hangzhou.aliyuncs.com/uploads/images/a7c93134c5e1440c58b1a7a3b675009b.png'); border-image-slice: 32 37 fill; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; background: none;">
        <div id="main2" style="width: 100%;height: 450px;"></div>
    </div>

    <div style="position: absolute; width: 400px; height: 300px; left: 28px; top: 750px; border-style: solid; border-width: 32px 37px; border-image-source: url('https://datav.oss-cn-hangzhou.aliyuncs.com/uploads/images/a7c93134c5e1440c58b1a7a3b675009b.png'); border-image-slice: 32 37 fill; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; background: none;">
        <div id="main4" style="width: 100%;height: 260px;"></div>
    </div>


    <div style="position: absolute; width: 400px; height: 168px; left: 32px; top: 80px;">
        <div style="color:#fff;font-size:30px;">外省游客人数</div>
        <div style="color:#e2d62a;font-size:40px;text-align:right">89,034人</div>
        <div style="color:#fff;font-size:30px;">本省游客人数</div>
        <div style="color:#e2d62a;font-size:40px;text-align:right">1,189,034人</div>
    </div>


</div>
</div>
<!--引入路径文件-->
<script src="js/APIPath.js"></script>
<!-- 全局js -->
<script src="js/jquery.min.js?v=2.1.4"></script>
<script src="js/bootstrap.min.js?v=3.3.6"></script>
<script src="js/plugins/layer/layer.min.js"></script>
<!-- Flot -->
<script src="js/plugins/flot/jquery.flot.js"></script>
<script src="js/plugins/flot/jquery.flot.tooltip.min.js"></script>
<script src="js/plugins/flot/jquery.flot.resize.js"></script>
<script src="js/plugins/flot/jquery.flot.pie.js"></script>
<!-- 自定义js -->
<script src="js/echarts.js"></script>
<script src="js/tools.js"></script>
<!--百度地图api-->
<!--<script src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>-->
<script src="http://gallery.echartsjs.com/dep/echarts/latest/extension/bmap.min.js"></script>
<!--<script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>-->
<!--阿里CDN-->
<script type="text/javascript" src='//cdn-service.datav.aliyun.com/static/js/libs/cube.min.js'></script>
<script src="//cdn-service.datav.aliyun.com/static/js/libs/event.js"></script>
<script src="js/windowResize.js"></script>
<script type="text/javascript" name="jobs">
    var time_interval = 60000;
    $(timeJobs());
    function timeJobs() {
        console.log("HELLO" + new Date().getTime());
        updateCurrentTouristsCount();
        updateCurrentTouristsTrend();
        updateCurrentTouristsRanks();
        setTimeout(function () {
            timeJobs()
        }, time_interval)
    }
    //更新当前游客总数
    function updateCurrentTouristsCount() {
        $.ajax({
            url: currentTouristsCountURL, data: {cityId: "1000"},
            success: function (json) {
                $("#otherProvinceCountBox").text(formatNumber(json.otherProvinceCount));
                $("#localProvinceCountBox").text(formatNumber(json.localProvinceCount));
                var countTourists = formatNumber(json.count);
                var countTouristsBox = '<span class="number prefix"></span>';
                for (var i = 0; i < countTourists.length; i++) {
                    var char = countTourists.charAt(i);
                    if (char == ',') {
                        countTouristsBox += '<span class="number comma">,</span>'
                    } else {
                        countTouristsBox += '<span class="number num">' + char + '</span>'
                    }
                }
                countTouristsBox += '<span class="number suffix">人</span>';
                $("#countTouristsBox").html(countTouristsBox)
                showPie(json.count, json.otherProvinceCount);
            }
        })
    }
    //    更新当前游客数量变化趋势
    function updateCurrentTouristsTrend() {
        $.ajax({
            url: currentTouristsTrendURL,
            data: {
                cityId: "1000"
            },
            success: function (json) {
                var nameArr = [];
                var countArr = [];
                var otherArr = [];
                var localArr = [];
                for (var i = 0; i < json.datas.length; i++) {
                    var son = json.datas[i];
                    nameArr[i] = son.dataTime;
                    countArr[i] = son.count;
                    otherArr[i] = son.otherProvinceCount;
                    localArr[i] = son.localProvinceCount;
                }
                showLine(nameArr, countArr, otherArr, localArr);
            }
        })
    }
    function updateCurrentTouristsRanks() {
        var randomArea = function (maparr) {
            var area = ['济南', '德州', '淄博', '聊城', '滨州', '莱芜', '泰安', '菏泽', '枣庄', '济宁', '临沂', '烟台', '青岛', '威海', '日照', '潍坊', '东营']
            for (var i = 0;i<maparr.length;i++){
                do {
                    var is = Math.ceil(Math.random() * 16);
                    var ct = area[is];
                    var to = true;
                    for (j = 0;j<maparr.length;j++){
                        var map = maparr[j];
                        if (ct == map.name){
                            to = false;
                            break;
                        }
                    }
                    if (to){
                        maparr[i].name = ct;
                        break;
                    }
                }while (1);
            }
            return maparr;
        };
        var alignmentAreaToMapData = function (maparr) {
            var nameArr = [];
            var valueArr = [];
            for (var i = 0;i<maparr.length;i++){
                var son = maparr[i];
                nameArr[i] = {
                    value: son.name,
                    textStyle: {
                        fontSize: 20,
                        color: '#fff'
                    }
                };
                valueArr[i] = son.value;
            }
            return[nameArr,valueArr]
        };
        $.ajax({
            url: currentTouristsRanksURL,
            data: {
                cityId: "1000"
            },
            success: function (json) {
                var nameArr = [];
                var valueArr = [];
                var mapArr = [];
                json.datas.sort(function (x, y) {
                    if (x.count < y.count) {
                        return -1;
                    }
                    return 1;
                });
                for (var i = 0; i < json.datas.length; i++) {
                    var son = json.datas[i];
                    nameArr[i] = {
                        value: son.regionID,
                        textStyle: {
                            fontSize: 20,
                            color: '#fff'
                        }
                    };
                    valueArr[i] = son.count;
                    mapArr[i] = {
                        name: son.regionID,
                        value: son.count
                    }
                }
//                showBar(nameArr, valueArr);
                //TODO 在正式数据来时要删除该方法
                mapArr = randomArea(mapArr);
                var mapDatas = alignmentAreaToMapData(mapArr);
                showBar(mapDatas[0], mapDatas[1]);

                showMessageToMap(mapArr)
            }
        })
    }
</script>
<script type="text/javascript" name="utils">
    function formatNumber(num) {
        num = num.toString();
        var str = num.split('').reverse().join('').replace(/(\d{4})/g, '$1,').replace(/\,$/, '').split('').reverse().join('');
        return str;
    }
</script>
<script type="text/javascript" name="chart">
    var styletype = getUrlParam("type") ? getUrlParam("type") : "";
    // 上层地图
    function showMessageToMap(mapArr) {
        var myChart = echarts.init(document.getElementById('main'));
        var name = 'sd';
        var chinaContourUrl = "svg/shandong.json";
        $.ajax({
            type: "GET",
            async: false,
            url: chinaContourUrl,
            success: function (json) {
                echarts.registerMap(name, json);
                myChart.setOption({
                    series: [{
                        type: 'map',
                        map: 'sd',
                        left: '20%',
                    }]
                });
            }
        });
        var data = mapArr;
        var geoCoordMap = {
            '海门': [121.15, 31.89],
            '鄂尔多斯': [109.781327, 39.608266],
            '招远': [120.38, 37.35],
            '舟山': [122.207216, 29.985295],
            '齐齐哈尔': [123.97, 47.33],
            '盐城': [120.13, 33.38],
            '赤峰': [118.87, 42.28],
            '青岛': [120.33, 36.07],
            '乳山': [121.52, 36.89],
            '金昌': [102.188043, 38.520089],
            '泉州': [118.58, 24.93],
            '莱西': [120.53, 36.86],
            '日照': [119.46, 35.42],
            '胶南': [119.97, 35.88],
            '南通': [121.05, 32.08],
            '拉萨': [91.11, 29.97],
            '云浮': [112.02, 22.93],
            '梅州': [116.1, 24.55],
            '文登': [122.05, 37.2],
            '上海': [121.48, 31.22],
            '攀枝花': [101.718637, 26.582347],
            '威海': [122.1, 37.5],
            '承德': [117.93, 40.97],
            '厦门': [118.1, 24.46],
            '汕尾': [115.375279, 22.786211],
            '潮州': [116.63, 23.68],
            '丹东': [124.37, 40.13],
            '太仓': [121.1, 31.45],
            '曲靖': [103.79, 25.51],
            '烟台': [121.39, 37.52],
            '福州': [119.3, 26.08],
            '瓦房店': [121.979603, 39.627114],
            '即墨': [120.45, 36.38],
            '抚顺': [123.97, 41.97],
            '玉溪': [102.52, 24.35],
            '张家口': [114.87, 40.82],
            '阳泉': [113.57, 37.85],
            '莱州': [119.942327, 37.177017],
            '湖州': [120.1, 30.86],
            '汕头': [116.69, 23.39],
            '昆山': [120.95, 31.39],
            '宁波': [121.56, 29.86],
            '湛江': [110.359377, 21.270708],
            '揭阳': [116.35, 23.55],
            '荣成': [122.41, 37.16],
            '连云港': [119.16, 34.59],
            '葫芦岛': [120.836932, 40.711052],
            '常熟': [120.74, 31.64],
            '东莞': [113.75, 23.04],
            '河源': [114.68, 23.73],
            '淮安': [119.15, 33.5],
            '泰州': [119.9, 32.49],
            '南宁': [108.33, 22.84],
            '营口': [122.18, 40.65],
            '惠州': [114.4, 23.09],
            '江阴': [120.26, 31.91],
            '蓬莱': [120.75, 37.8],
            '韶关': [113.62, 24.84],
            '嘉峪关': [98.289152, 39.77313],
            '广州': [113.23, 23.16],
            '延安': [109.47, 36.6],
            '太原': [112.53, 37.87],
            '清远': [113.01, 23.7],
            '中山': [113.38, 22.52],
            '昆明': [102.73, 25.04],
            '寿光': [118.73, 36.86],
            '盘锦': [122.070714, 41.119997],
            '长治': [113.08, 36.18],
            '深圳': [114.07, 22.62],
            '珠海': [113.52, 22.3],
            '宿迁': [118.3, 33.96],
            '咸阳': [108.72, 34.36],
            '铜川': [109.11, 35.09],
            '平度': [119.97, 36.77],
            '佛山': [113.11, 23.05],
            '海口': [110.35, 20.02],
            '江门': [113.06, 22.61],
            '章丘': [117.53, 36.72],
            '肇庆': [112.44, 23.05],
            '大连': [121.62, 38.92],
            '临汾': [111.5, 36.08],
            '吴江': [120.63, 31.16],
            '石嘴山': [106.39, 39.04],
            '沈阳': [123.38, 41.8],
            '苏州': [120.62, 31.32],
            '茂名': [110.88, 21.68],
            '嘉兴': [120.76, 30.77],
            '长春': [125.35, 43.88],
            '胶州': [120.03336, 36.264622],
            '银川': [106.27, 38.47],
            '张家港': [120.555821, 31.875428],
            '三门峡': [111.19, 34.76],
            '锦州': [121.15, 41.13],
            '南昌': [115.89, 28.68],
            '柳州': [109.4, 24.33],
            '三亚': [109.511909, 18.252847],
            '自贡': [104.778442, 29.33903],
            '吉林': [126.57, 43.87],
            '阳江': [111.95, 21.85],
            '泸州': [105.39, 28.91],
            '西宁': [101.74, 36.56],
            '宜宾': [104.56, 29.77],
            '呼和浩特': [111.65, 40.82],
            '成都': [104.06, 30.67],
            '大同': [113.3, 40.12],
            '镇江': [119.44, 32.2],
            '桂林': [110.28, 25.29],
            '张家界': [110.479191, 29.117096],
            '宜兴': [119.82, 31.36],
            '北海': [109.12, 21.49],
            '西安': [108.95, 34.27],
            '金坛': [119.56, 31.74],
            '东营': [118.49, 37.46],
            '牡丹江': [129.58, 44.6],
            '遵义': [106.9, 27.7],
            '绍兴': [120.58, 30.01],
            '扬州': [119.42, 32.39],
            '常州': [119.95, 31.79],
            '潍坊': [119.1, 36.62],
            '重庆': [106.54, 29.59],
            '台州': [121.420757, 28.656386],
            '南京': [118.78, 32.04],
            '滨州': [118.03, 37.36],
            '贵阳': [106.71, 26.57],
            '无锡': [120.29, 31.59],
            '本溪': [123.73, 41.3],
            '克拉玛依': [84.77, 45.59],
            '渭南': [109.5, 34.52],
            '马鞍山': [118.48, 31.56],
            '宝鸡': [107.15, 34.38],
            '焦作': [113.21, 35.24],
            '句容': [119.16, 31.95],
            '北京': [116.46, 39.92],
            '徐州': [117.2, 34.26],
            '衡水': [115.72, 37.72],
            '包头': [110, 40.58],
            '绵阳': [104.73, 31.48],
            '乌鲁木齐': [87.68, 43.77],
            '枣庄': [117.57, 34.86],
            '杭州': [120.19, 30.26],
            '淄博': [118.05, 36.78],
            '鞍山': [122.85, 41.12],
            '溧阳': [119.48, 31.43],
            '库尔勒': [86.06, 41.68],
            '安阳': [114.35, 36.1],
            '开封': [114.35, 34.79],
            '济南': [117, 36.65],
            '德阳': [104.37, 31.13],
            '温州': [120.65, 28.01],
            '九江': [115.97, 29.71],
            '邯郸': [114.47, 36.6],
            '临安': [119.72, 30.23],
            '兰州': [103.73, 36.03],
            '沧州': [116.83, 38.33],
            '临沂': [118.35, 35.05],
            '南充': [106.110698, 30.837793],
            '天津': [117.2, 39.13],
            '富阳': [119.95, 30.07],
            '泰安': [117.13, 36.18],
            '诸暨': [120.23, 29.71],
            '郑州': [113.65, 34.76],
            '哈尔滨': [126.63, 45.75],
            '聊城': [115.97, 36.45],
            '芜湖': [118.38, 31.33],
            '唐山': [118.02, 39.63],
            '平顶山': [113.29, 33.75],
            '邢台': [114.48, 37.05],
            '德州': [116.29, 37.45],
            '济宁': [116.59, 35.38],
            '荆州': [112.239741, 30.335165],
            '宜昌': [111.3, 30.7],
            '义乌': [120.06, 29.32],
            '丽水': [119.92, 28.45],
            '洛阳': [112.44, 34.7],
            '秦皇岛': [119.57, 39.95],
            '株洲': [113.16, 27.83],
            '石家庄': [114.48, 38.03],
            '莱芜': [117.67, 36.19],
            '常德': [111.69, 29.05],
            '保定': [115.48, 38.85],
            '湘潭': [112.91, 27.87],
            '金华': [119.64, 29.12],
            '岳阳': [113.09, 29.37],
            '长沙': [113, 28.21],
            '衢州': [118.88, 28.97],
            '廊坊': [116.7, 39.53],
            '菏泽': [115.480656, 35.23375],
            '合肥': [117.27, 31.86],
            '武汉': [114.31, 30.52],
            '大庆': [125.03, 46.58]
        };
        var convertData = function (data) {
            var res = [];
            for (var i = 0; i < data.length; i++) {
                var geoCoord = geoCoordMap[data[i].name];
                if (geoCoord) {
                    res.push({
                        name: data[i].name,
                        value: geoCoord.concat(data[i].value)
                    });
                }
            }
            return res;
        };
        var option = {
            backgroundColor: false,
            borderWidth: 10,
            title: {
                text: '',
                left: 'center',
                textStyle: {
                    color: '#fff'
                }
            },
            tooltip: {
                trigger: 'item',
                formatter: function (params) {
                    return params.data.name + '<br>' + params.data.value[2] + "人" + "<br><span style='color:#ed7044'>总人数</span>"
                }
            },
            geo: {
                map: 'sd',
                label: {
                    emphasis: {
                        show: false
                    }
                },
                roam: false,
                itemStyle: {
                    normal: {
                        borderColor: '#fff',
                        borderWidth: 2,
                        color: {
                            type: 'linear',
                            x: 0,
                            y: 0,
                            x2: 0,
                            y2: 1,
                            colorStops: [{
                                offset: 0, color: 'rgba(255,0,0,0)' // 0% 处的颜色
                            }, {
                                offset: 1, color: 'rgba(255,255,0,0)' // 100% 处的颜色
                            }],
                            globalCoord: false // 缺省为 false
                        }
                    },
                    emphasis: {
                        areaColor: '#0d1766',
                    },

                },
            },
            //點
            series: [
                {
                    name: '总人数',
                    type: 'effectScatter',
                    coordinateSystem: 'geo',
                    data: convertData(data.sort(function (a, b) {
                        return b.value - a.value;
                    })),
                    symbolSize: function (val) {
                        return val[2] / 100000;
                    },
                    showEffectOn: 'render',
                    rippleEffect: {
                        brushType: 'stroke'
                    },
                    hoverAnimation: true,
                    itemStyle: {
                        normal: {
                            color: '#f4e925',
                            shadowBlur: 10,
                            shadowColor: '#333'
                        }
                    },
                    zlevel: 1,
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    }
    // 底层地图
    (function () {
        var myChart5 = echarts.init(document.getElementById('main5'));
        var name = 'shandong-full';
        var chinaContourUrl = "svg/shandong-full.json";
        $.ajax({
            type: "GET",
            async: false,
            url: chinaContourUrl,
            success: function (json) {
                echarts.registerMap(name, json);
//                myChart5.setOption({
//                    series: [{
//                        type: 'map',
//                        map: 'shandong-full',
//                        left:'-9999',
//                    }]
//                });
            }
        });
        var option5 = {
            backgroundColor: false,
            itemStyle: {
                normal: {
                    borderWidth: 0,
                    shadowColor: 'rgba(0, 0, 0, 0.7)',
                    shadowBlur: 60,
                    shadowOffsetX: 20,
                    shadowOffsetY: 40
                }
            },
            geo: {
                map: 'shandong-full',
                left: '20%',
                roam: false,
                itemStyle: {
                    borderWidth: 0,
                    normal: {
                        color: {
                            type: 'linear',
                            x: 0,
                            y: 0,
                            x2: 0,
                            y2: 1,
                            colorStops: [{
                                offset: 0, color: 'rgba(12,77,195,1)' // 0% 处的颜色
                            }, {
                                offset: 0.5, color: 'rgba(54,97,169,0.6)' // 100% 处的颜色
                            }, {
                                offset: 1, color: 'rgba(42,8,140,1)' // 100% 处的颜色
                            }],
                            globalCoord: false // 缺省为 false
                        },
                    },


                },
            },
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart5.setOption(option5);
    })();
    //排行榜 条形图
    function showBar(nameArr, valueArr) {
        var myChart2 = echarts.init(document.getElementById('main2'));
        var option2 = {
            title: {
                text: '全省实时游客排行',
                show: false
            },
            grid: {
                left: '6%',
                right: '18%',
                containLabel: true,
                y2: 10
            },
            xAxis: [{
                type: 'value',
                axisLabel: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                axisLine: {
                    show: false
                },
                splitLine: {
                    show: false
                }

            }],
            yAxis: [{
                type: 'category',
                boundaryGap: false,
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                axisLabel: {
                    interval: null,
                },
                data: nameArr,
                splitLine: {
                    show: false
                },

            }],
            series: [{
                name: '游客人数',
                type: 'bar',
                barWidth: 20,
                label: {
                    normal: {
                        show: true,
                        position: 'right',
                        formatter: '{c}人',
                        textStyle: {
                            color: "#fff",
                            fontSize: 16
                        }
                    }
                },
                itemStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(1, 0, 0, 0, [{
                            offset: 0,
                            color: '#f3d322'
                        }, {
                            offset: 1,
                            color: '#f6cc24'
                        }]),
                        shadowColor: 'rgba(0, 0, 0, 0.1)',
                        shadowBlur: 10
                    }
                },
                data: valueArr
            }]
        };
        myChart2.setOption(option2);
    }

    //变化趋势 折线图
    function showLine(nameArr, countArr, otherArr, localArr) {
        var myChart3 = echarts.init(document.getElementById('main3'));
        var option3 = {
            color: ['#00ffff', '#00ffa2', '#f0e750'],
            tooltip: {
                trigger: 'axis',
                textStyle: {
                    fontSize: 15,
                    color: "#fff",
                }
            },
            legend: {
                orient: 'horizontal',
                right: "4%",
                itemGap: 20,
                //itemWidth:16,
                //itemHeight:12,
                data: ['外省人数', '本省人数', '总人数'],
                textStyle: {
                    color: '#fff',
                }
            },
            grid: {
                show: true,
                left: 60,
                top: 34,
                right: 44,
                bottom: 42,
                borderWidth: 1,
                borderColor: 'rgba(170,172,178,0.33)',
                backgroundColor: 'rgba(17, 34, 69, 0.24)',
            },
            calculable: true,
            xAxis: [{
                type: 'category',
                boundaryGap: false,
                //在（type: 'category'）中设置data有效
                data: nameArr,
                splitLine: { //坐标轴在 grid 区域中的分隔线；
                    show: true,
                    lineStyle: { //分割线颜色，可设单个，也可以设置数组。
                        color: 'rgba(170,172,178,0.33)'
                    }
                },
                axisLine: { //坐标轴轴线相关设置。就是数学上的x轴
                    show: true,
                    lineStyle: {
                        color: 'rgba(170,172,178,0.53)'
                    },
                },
                axisLabel: {
                    textStyle: {
                        color: 'rgba(255,255,255,0.83)',
                        fontSize: 16,
                    },
                },
            }],
            yAxis: [{
                type: 'value',
                min: 0,
                splitLine: {
                    show: true,
                    lineStyle: {
                        color: 'rgba(170,172,178,0.33)'
                    }
                },
                axisLine: { //坐标轴轴线相关设置。就是数学上的y轴
                    show: true,
                    lineStyle: {
                        color: 'rgba(170,172,178,0.53)'
                    },
                },
                axisLabel: {
                    textStyle: {
                        color: 'rgba(255,255,255,0.83)',
                        fontSize: 14,
                    },
                },
                splitArea: {
                    show: true,
                    areaStyle: {
                        color: ['#112245', 'rgba(34,50,82,0.4)']
                    }
                }
            }],
            series: [{
                name: '本省人数',
                type: 'line',
                smooth: true, //是否平滑曲线显示
                lineStyle: { //线条样式
                    normal: {
                        width: 1
                    }
                },
                areaStyle: { //区域填充样式
                    normal: {
                        //线性渐变，前4个参数分别是x0,y0,x2,y2(范围0~1);相当于图形包围盒中的百分比。如果最后一个参数是‘true’，则该四个值是绝对像素位置。
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: 'rgba(0, 255, 255, 0.9)'
                        }, {
                            offset: 0.7,
                            color: 'rgba(0, 255, 255, 0.6)'
                        }], false),

                        shadowColor: 'rgba(0, 0, 0, 0.9)', //阴影颜色
                        shadowBlur: 10 //shadowBlur设图形阴影的模糊大小。配合shadowColor,shadowOffsetX/Y, 设置图形的阴影效果。
                    }
                },
                itemStyle: { //折现拐点标志的样式
                    normal: {
                        color: 'rgb(0,255,255)'
                    }
                },
                data: localArr
            }, {
                name: '外省人数',
                type: 'line',
                smooth: true,
                lineStyle: {
                    normal: {
                        width: 1
                    }
                },
                areaStyle: {
                    normal: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                            offset: 0,
                            color: 'rgba(240, 231, 80, 0.9)'
                        }, {
                            offset: 0.8,
                            color: 'rgba(240, 231, 80, 0.4)'
                        }], false),
                        shadowColor: 'rgba(0, 0, 0, 0.9)',
                        shadowBlur: 10
                    }
                },
                itemStyle: {
                    normal: {
                        color: 'rgb(240,231,80)'

                    }
                },
                data: otherArr
            },
                {
                    name: '总人数',
                    type: 'line',
                    smooth: true,
                    lineStyle: {
                        normal: {
                            width: 1
                        }
                    },
                    itemStyle: {
                        normal: {
                            color: 'rgb(0,255,162)'
                        }
                    },
                    areaStyle: {
                        normal: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(0,255,162, 0.8)'
                            }, {
                                offset: 0.8,
                                color: 'rgba(0,255,162, 0.4)'
                            }], false),
                            shadowColor: 'rgba(0, 0, 0, 0.9)',
                            shadowBlur: 10
                        }
                    },
                    data: countArr
                },
            ] //series结束
        }; // option结束
        // 使用刚指定的配置项和数据显示图表。
        myChart3.setOption(option3);
    }
    // 展示饼图
    function showPie(countnum, othernum) {
        var otherProportion = (othernum / countnum * 100).toFixed(1);
        var localProportion = (100 - otherProportion).toFixed(1);
        var myChart4 = echarts.init(document.getElementById('main4'), 'shine' + styletype);
        var option4 = {
            backgroundColor: false,
            series: [{
                type: 'pie',
                radius: ['35%', '55%'],
                silent: true,
                data: [{
                    value: 1,
                    itemStyle: {
                        normal: {
                            color: '#050f58',
                            borderColor: '#162abb',
                            borderWidth: 2,
                            shadowBlur: 50,
                            shadowColor: 'rgba(21,41,185,.75)'
                        }
                    }
                }]
            }, {
                type: 'pie',
                radius: ['35%', '55%'],
                silent: true,
                label: {
                    normal: {
                        show: false,
                    }
                },
                data: [{
                    value: 1,
                    itemStyle: {
                        normal: {
                            color: '#050f58',
                            shadowBlur: 50,
                            shadowColor: 'rgba(21,41,185,.75)'
                        }
                    }
                }]
            }, {
                name: '占比',
                type: 'pie',
                radius: ['39%', '52%'],
                hoverAnimation: false,
                data: [{
                    value: localProportion,
                    name: "本省人数",
                    itemStyle: {
                        normal: {
                            label: {
                                show: true,
                                textStyle: {
                                    fontSize: 15,
                                    fontWeight: "bold"
                                },
                                position: "center"
                            },
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(5,193,255,1)'
                            }, {
                                offset: 1,
                                color: 'rgba(15,15,90,1)'
                            }])
                        }
                    },
                    label: {
                        normal: {
                            position: 'outside',
                            textStyle: {
                                color: '#fff',
                                fontSize: 14
                            },
                            formatter: '{b}\n\n{a}: {c}%'
                        }
                    },
                    labelLine: {
                        normal: {
                            show: true,
                            length: 0,
                            length2: 20,
                            smooth: false,
                            lineStyle: {
                                width: 1,
                                color: "#2141b5"
                            }
                        }
                    }
                }, {
                    value: otherProportion,
                    name: "外省人数",
                    itemStyle: {
                        normal: {
                            label: {
                                show: true,
                                textStyle: {
                                    fontSize: 15,
                                    fontWeight: "bold"
                                },
                                position: "center"
                            },
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                offset: 0,
                                color: 'rgba(5,15,88,1)'
                            }, {
                                offset: 1,
                                color: 'rgba(235,122,255,1)'
                            }])
                        }
                    },
                    label: {
                        normal: {
                            position: 'outside',
                            textStyle: {
                                color: '#fff',
                                fontSize: 14
                            },
                            formatter: '{b}\n\n{a}: {c}%'
                        }
                    },
                    labelLine: {
                        normal: {
                            show: true,
                            length: 0,
                            length2: 15,
                            smooth: false,
                            lineStyle: {
                                width: 1,
                                color: "#2141b5"
                            }
                        }
                    }
                }]
            }, {
                name: '',
                type: 'pie',
                clockWise: true,
                hoverAnimation: false,
                radius: [200, 200],
                label: {
                    normal: {
                        position: 'center'
                    }
                },
                data: [{
                    value: 0,
                    label: {
                        normal: {
                            formatter: countnum.toString(),
                            textStyle: {
                                color: '#fe8b53',
                                fontSize: 14,
                                fontWeight: 'bold'
                            }
                        }
                    }
                }, {
                    tooltip: {
                        show: false
                    },
                    label: {
                        normal: {
                            formatter: '\n总人数',
                            textStyle: {
                                color: '#bbeaf9',
                                fontSize: 14
                            }
                        }
                    }
                }]
            }]
        };
        myChart4.setOption(option4);
    }

</script>

</body>

</html>
